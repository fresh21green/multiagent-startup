<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>multiagent-manager ‚Äî Dashboard</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<header class="topbar">
  <div class="container">
    <h1>ü§ñ MultiAgent Manager</h1>
    <nav>
      <a class="btn" href="/create_agent">–°–æ–∑–¥–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</a>
      <a class="btn" href="/">–û–±–Ω–æ–≤–∏—Ç—å</a>
    </nav>
  </div>
</header>

<main class="container">
  <section class="panel">
    <h2>–°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h2>
    {% if agents and agents|length > 0 %}
      <div class="grid">
        {% for a in agents %}
          <div class="card">
            <div class="card-header">
              <strong>{{ a.name }}</strong>
              <span class="muted">slug: {{ a.slug }}</span>
            </div>
            <div class="card-body">
              <p class="small">–°–æ–∑–¥–∞–Ω–æ: {{ a.created_at }}</p>
              <p>–°—Ç–∞—Ç—É—Å: <b>{{ a.status }}</b></p>
              {% if a.deploy_url %}
                <p>URL: <a href="{{ a.deploy_url }}" target="_blank">{{ a.deploy_url }}</a></p>
              {% endif %}
              <p>
                <a class="small-link" href="{{ a.zip }}">Download ZIP</a>
              </p>

              <form method="post" action="/api/set_worker_url" class="inline-form">
                <input type="hidden" name="slug" value="{{ a.slug }}">
                <label>Paste deploy URL</label>
                <input class="input" name="deploy_url" placeholder="https://worker-...onrender.com" value="{{ a.deploy_url or '' }}">
                <label>Test chat id (optional)</label>
                <input class="input" name="test_chat_id" placeholder="123456789" value="{{ a.test_chat_id or '' }}">
                <button class="btn small" type="submit">Save URL</button>
              </form>

              <form method="post" action="/api/delete_agent" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ {{ a.name }} ?');">
                <input type="hidden" name="slug" value="{{ a.slug }}">
                <button class="btn danger" type="submit">–£–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</button>
              </form>

              <form method="post" action="/api/assign_task" class="inline-form">
                <input type="hidden" name="slug" value="{{ a.slug }}">
                <label>–ù–∞–∑–Ω–∞—á–∏—Ç—å –∑–∞–¥–∞—á—É</label>
                <input class="input" name="task" placeholder="–û–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É –¥–ª—è —ç—Ç–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞">
                <button class="btn" type="submit">Send</button>
              </form>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="muted">–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ —Å–Ω–∞—á–∞–ª–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.</p>
    {% endif %}
  </section>
</main>

<footer class="footer">
  <div class="container">
    <p class="muted">multiagent-manager ¬∑ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AI —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏</p>
  </div>
</footer>
</body>
</html>
